# Trizum/games
Преполагается, что исходники игр доступны в папке **@trizum/games**
## Инициализация игр

```js
import { Factory, GameIdentifiers } from '@trizum/games';

const GameName = GameIdentifiers.Game2048;
const GameItems = Factory(name);
```
**Factory** - Фабрика по созданию инстанса игры, принимает в параметр идентификатор игры из объекта **GameIdentifiers**, инстанс игры необходимо создавать вне рендера, чтобы исключить перезапуск игры при перерендере родительского компонента.

## Пример интеграции игры

```js
import { Factory, GameIdentifiers } from '@trizum/games';

const GameName = GameIdentifiers.Game2048;
const GameItems = Factory(name);

export const GameContainer = () => {
    const params = {
        size : 4,
        startTiles : 2
    }; // Уникальные параметры для конкретной игры
    let ref = null;

    const startGame = () => {
        ref?.start();
    };

    const onEnd = (result) => { // Пример использования результатов игры
        const message = [`Ваше время: ${result.time} секунд`];
        if(result?.timeDiff) {
            message.push(`Среднее время: ${result.timeDiff} секунд`);
        }
        if(result?.score) {
            message.push(`Ваш результат: ${result.score}`);
        }
        if(result?.success) {
            message.push(`Правильных ответов: ${result.success}`);
        }
        if(result?.failed) {
            message.push(`Допущено ошибок: ${result.failed}`);
        }
        /* eslint-disable no-alert */
        alert(message.join("\n"));
    };

    return <div>
        <GameItems
            width={800}
            onEnd={onEnd}
            onRef={gameRef => ref = gameRef}
            {...params}
        />
        <button onClick={startGame}>Начать игру</button>
    </div>;
};
```


## Общие параметры игр
Эти параметры должны передаваться для всех игр
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| width | number | 200 | Ширина игрового поля в пикселях |
| onRef | function | void | Функция для получения instance игры |
| onEnd | function | void | Функция с результатами игры, вызывается при окончании игры и передаёт первым параметром сущность **GameResult** |

## Методы игры доступные через **ref**
Эти методы доступны после получения **ref** игры и эти методы обязательны для всех игр
| Название | Описание |
| :---:   | :---: |
| start | Начинает игру |

## Сущность: GameResult
Содержит в себе результат завершения игры и следующие значения
| Название | Обязательное | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: | :---: |
| result | Да | enum | 'win' \| 'lose' \| 'end' | win - победа, lose - проигрыш, end - конец игры |
| time | Да | number | Секунды | Время затраченное на игру |
| timeDiff | Нет | number | Секунды | Среднее время |
| score | Нет | number | Число | Набранные очки в игре |
| failed | Нет | number | Число | Кол-во ошибок |
| success | Нет | number | Число | Кол-во правильных действий |

## Игра 2048
Идентификатор игры - **GameIdentifiers.Game2048**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| groupsCount | number | 4 | Размер игрового поля в X на X |
| elementsTotal | number | 2 | Кол-во первоначальных блоков |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | enum | 'win' \| 'end' | win - победа, end - конец игры |
| time | number | Секунды | Время затраченное на игру |
| score | number | Число | Набранные очки в игре |

## Игра "Таблица Шульте"
Идентификатор игры - **GameIdentifiers.shulte**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| elementsTotal | number | 3 | Размер игрового поля x на x |
| groupsCount | number | 1 | Кол-во цветов для блоков |
| colorsMap | string[] | ['#333','#f00','#0f0'] | Массив цветов для блоков |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end' | end - конец игры |
| time | number | Секунды | Время затраченное на игру |
| failed | number | Число | Кол-во ошибок |

## Игра "Сдвиг по вертикали"
Идентификатор игры - **GameIdentifiers['shiftVertical']**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| timeComplete | number | 10000 | Время на прохождение всех уровней игры в секундах, по истечению этого времени игра прекратится |
| cycleTime | number | 5 | Время в секундах на запоминание изначальных фигур и цветов |
| elementsTotal | number | 2 | Кол-во уровней в игре |
| groupsCount | number | 2 | Кол-во цветов для игры |
| blinksCount | number | 2 | Кол-во форм для игры |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end' | end - конец игры |
| time | number | Секунды | Время затраченное на игру |
| failed | number | Число | Кол-во неправильных ответов |
| success | number | Число | Кол-во правильных ответов |

## Игра "Битва полушарий"
Идентификатор игры - **GameIdentifiers['battleColors']**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| timeComplete | number | 60 | Время на прохождение всех уровней игры в секундах, по истечению этого времени игра прекратится |
| elementsTotal | number | 2 | Кол-во уровней в игре |
| blinksCount | number | 2 | Кол-во цветов для игры |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end' | end - конец игры |
| time | number | Секунды | Время затраченное на игру |
| failed | number | Число | Кол-во неправильных ответов |
| success | number | Число | Кол-во правильных ответов |

## Игра "Ментальный счет"
Идентификатор игры - **GameIdentifiers.mental**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| delay | number | 1000 | Пауза при появлении цифр для счета в миллисекундах |
| requiredFormulas | string[] | [] | Массив обязательных формул |
| allowedFormulas | string[] | [] | Массив поддерживаемых формул |
| min | number | 1 | Минимальное слагаемое |
| max | number | 999 | Максимальное значение результата |
| subtract | boolean | true | Использовать вычитание |
| restriction | boolean | true | Результат не больше чем по формуле |
| length | number | 3 | Кол-во слагаемых в одной задаче |
| count | number | 3 | Кол-во задач |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end' | end - конец игры |
| time | number | Секунды | Время затраченное на игру |
| timeDiff | number | Секунды | Среднее время затраченное на задачу |
| failed | number | Число | Кол-во неправильных ответов |
| success | number | Число | Кол-во правильных ответов |

## Игра "Паровик"
Идентификатор игры - **GameIdentifiers['steam']**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| timeComplete | number | 10 | Время на прохождение уровня |
| elementsTotal | number | 5 | Кол-во успешных нажатий на манометр для выигрыша |
| errorAacceptable | number | 1 | Кол-во единиц на которое уменьшится кол-во успешных нажатий на манометр, если игрок промахнется или не успеет нажать на манометр |
| speed | number | 1 | Скорость кручения стрелки манометра, измеряется в оборотах в секунду, т.е. при значении 1 - будет один полный оборот стрелки в секунду, при значении 0.5 - пол оборота в секунду, при значении 2 - будет 2 полных оборота в секунду |
| groupsCount | number | 1 | Кол-во манометров |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end'\|'lose' | end - конец игры |

## Игра "Бирюльки"
Идентификатор игры - **GameIdentifiers['paint']**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| timeComplete | number | 10 | Время на прохождение уровня |
| elementsTotal | number | 2 | Кол-во фигур для угадывания |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end'\|'lose' | end - конец игры |

## Игра "Память и ритм"
Идентификатор игры - **GameIdentifiers['blinks']**
### Параметры игры
| Название | Тип значения | Значение по умолчанию | Описание |
| :---:   | :---: | :---: | :---: |
| blinksCount | number | 2 | Кол-во миганий |
| sound | number | 1 | Звук вкл/выкл, где 1 это звук включен, а 0 это выключен |
### Результат игры
| Название | Тип значения | Значение | Описание |
| :---:   | :---: | :---: | :---: |
| result | string | 'end'\|'lose' | end - конец игры |
| time | number | Секунды | Время затраченное на игру |
